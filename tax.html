<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>рдЧреНрд░рд╛рдордкрдВрдЪрд╛рдпрдд рд╕реЗрддреВ - Search Records</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  font-family: "Noto Sans Devanagari", Arial, sans-serif;
  margin: 0;
  background: #f9f9f9;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
header {
  background: linear-gradient(135deg, #8fc1e3, #c1f0d1);
  color: #333;
  padding: 15px;
  text-align: center;
  position: relative;
}
header h1 { margin: 0; font-size: 22px; }
.lang-switch {
  position: absolute;
  right: 15px;
  top: 15px;
  padding: 5px 10px;
  cursor: pointer;
  background: #fff;
  border-radius: 5px;
  border: 1px solid #ccc;
  font-size: 14px;
}
footer {
  background: #eee;
  color: #333;
  text-align: center;
  padding: 12px;
  margin-top: auto;
  font-size: 14px;
}
.container { padding: 20px; flex: 1; }
.search-bar {
  width: 100%;
  max-width: 400px;
  padding: 10px;
  margin: 20px auto;
  display: block;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 16px;
}
.user-list { max-width: 600px; margin: auto; }
.user-item {
  background: #fff;
  padding: 12px 15px;
  margin: 8px 0;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: 0.3s ease;
}
.user-item:hover { background: #e0f7fa; }
.popup {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.2);
  z-index: 1000;
  overflow-y: auto;
}
.popup-content {
  background: #fff;
  margin: 50px auto;
  max-width: 600px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.popup-header {
  background: linear-gradient(135deg, #8fc1e3, #c1f0d1);
  color: #333;
  text-align: center;
  padding: 20px;
  position: relative;
}
.popup-header img {
  width: 100px; height: 100px;
  border-radius: 50%;
  border: 3px solid #fff;
  margin-bottom: 10px;
}
.popup-header h2 { margin: 5px 0; font-size: 22px; }
.popup-header h3 { margin: 2px 0; font-size: 16px; font-weight: normal; }
.popup-header p { margin: 4px 0; font-size: 15px; }
.close-btn {
  position: absolute;
  top: 10px; right: 10px;
  background: #fff;
  border: none;
  font-size: 20px;
  padding: 5px 10px;
  border-radius: 50%;
  cursor: pointer;
  color: #333;
}
.section {
  background: #fdfdfd;
  margin: 15px;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}
.section h4 {
  margin: 0 0 10px;
  font-size: 18px;
  color: #333;
  border-bottom: 1px solid #ddd;
  padding-bottom: 5px;
}
.section p { margin: 6px 0; font-size: 15px; }
.highlight { font-weight: bold; color: #d32f2f; font-size: 16px; }
.paid-highlight { font-weight: bold; color: #388e3c; font-size: 16px; }
</style>
</head>
<body>

<header>
  <h1 id="headerTitle">ЁЯМР рдЧреНрд░рд╛рдордкрдВрдЪрд╛рдпрдд рд╕реЗрддреВ</h1>
  <button class="lang-switch" onclick="switchLang()">EN</button>
</header>

<div class="container">
  <input type="text" id="searchBar" class="search-bar" placeholder="ЁЯФН рдирд╛рд╡ рд╢реЛрдзрд╛ / Search name">
  <div class="user-list" id="userList"></div>
</div>

<div class="popup" id="popup">
  <div class="popup-content">
    <div class="popup-header">
      <button class="close-btn" onclick="closePopup()">тЬХ</button>
      <img id="popupImg" src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Profile">
      <h2 id="popupNameMr">рдирд╛рдо</h2>
      <h3 id="popupNameEn">Name</h3>
      <p id="popupWard">ЁЯПа рд╡рд╛рд░реНрдб рдирдВ. __, рдШрд░ рдирдВ. __</p>
    </div>
    <div class="section" id="demandSection">
      <h4>ЁЯФ╣ рдорд╛рдЧрдгреА (Demand)</h4>
      <p>рдШрд░рдкреА рдХрд░: <span id="dHarpi"></span></p>
      <p>рдЖрд░реЛрдЧреНрдп рдХрд░: <span id="dArogya"></span></p>
      <p>рджрдмрд╛рдмреА рдХрд░: <span id="dDababi"></span></p>
      <p>рдкрд╛рдгреАрдкрд┐ рдХрд░: <span id="dPani"></span></p>
      <p>рдкрдбрд╕рд░ рдЬрдореАрди: <span id="dPad"></span></p>
      <p>рджрдВрдб: <span id="dFine"></span></p>
      <p class="highlight">рдПрдХреВрдг рдорд╛рдЧрдгреА: <span id="dTotal"></span></p>
    </div>
    <div class="section" id="collectionSection">
      <h4>ЁЯФ╣ рд╡рд╕реБрд▓ (Collection)</h4>
      <p>рдмреБрдХ: <span id="cBook"></span></p>
      <p>рдкрд╛рд╡рддреА рдХреНрд░рдорд╛рдВрдХ: <span id="cReceipt"></span></p>
      <p>рдкрд╛рд╡рддреА рджрд┐рдирд╛рдВрдХ: <span id="cDate"></span></p>
      <p>Paid рдШрд░рдкреА рдХрд░: <span id="cHarpi"></span></p>
      <p>Paid рдЖрд░реЛрдЧреНрдп рдХрд░: <span id="cArogya"></span></p>
      <p>Paid рджрдмрд╛рдмреА рдХрд░: <span id="cDababi"></span></p>
      <p>Paid рдкрд╛рдгреАрдкрд┐ рдХрд░: <span id="cPani"></span></p>
      <p>Paid Land Tax / рднрд░рд▓реЗрд▓рд╛ рдкрдбрд╕рд░ рдЬрдореАрди: <span id="cPadLand"></span></p>
      <p>Paid Penalty / рднрд░рд▓реЗрд▓рд╛ рджрдВрдб: <span id="cFinePaid"></span></p>
      <p>Discount / рд╕реБрдЯ: <span id="cDiscount"></span></p>
      <p class="paid-highlight">Total Collection / рдПрдХреВрдг рд╡рд╕реБрд▓: <span id="cTotalCollection"></span></p>
      <p>Balance / рдмрд╛рдХреА: <span id="cRemain"></span></p>
    </div>
  </div>
</div>

<footer>
  <p>┬й 2025 рдЧреНрд░рд╛рдордкрдВрдЪрд╛рдпрдд рд╕реЗрддреВ | All Rights Reserved</p>
</footer>

<script>
let lang = 'mr';
let usersData = [];

function switchLang() {
  lang = (lang==='mr') ? 'en' : 'mr';
  document.getElementById('headerTitle').innerText = (lang==='mr') ? "ЁЯМР рдЧреНрд░рд╛рдордкрдВрдЪрд╛рдпрдд рд╕реЗрддреВ" : "ЁЯМР Gram Panchayat Setu";
  document.getElementById('searchBar').placeholder = (lang==='mr') ? "ЁЯФН рдирд╛рд╡ рд╢реЛрдзрд╛" : "ЁЯФН Search name";
  displayUsers(usersData);
}

function closePopup() { document.getElementById('popup').style.display='none'; }

// CSV URL
const csvURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTDCBhcg0ARlcpZqsc5KHZh6mWi3cgqS1KCtHoSVziWsCDoR0ZyxWcqkYMdWxPVCfgrj7kNSP574xVa/pub?output=csv";

// Fetch and parse CSV
fetch(csvURL)
.then(res => res.text())
.then(csv => {
  const rows = csv.split("\n").filter(r=>r.trim()!=='').map(r => r.split(","));
  const headers = rows[0].map(h => h.trim());
  usersData = rows.slice(1).map(r=>{
    let obj = {};
    r.forEach((c,i)=>{ obj[headers[i]] = c.trim(); });
    obj.
