<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>‡§ó‡•ç‡§∞‡§æ‡§Æ‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§ ‡§∏‡•á‡§§‡•Ç - Search Records</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
/* ===== Header ===== */
header.webapp-header {
  background: linear-gradient(120deg, #b3e5fc, #81d4fa);
  padding: 20px 30px;
  border-bottom-left-radius: 80px;
  border-bottom-right-radius: 80px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  color: #0D47A1;
  animation: fadeInHeader 1.2s ease-in-out;
}
@keyframes fadeInHeader {
  0% { opacity: 0; transform: translateY(-30px); }
  100% { opacity: 1; transform: translateY(0); }
}
.logo-section {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
}
.logo-title {
  display: flex;
  align-items: center;
  gap: 15px;
}
.logo {
  width: 70px;
  height: 70px;
  object-fit: contain;
  border-radius: 12px;
  background-color: white;
  padding: 5px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}
.title-text h1 {
  font-size: 26px;
  margin: 0;
  color: #0D47A1;
}
.title-text p {
  margin: 2px 0 0;
  font-size: 16px;
  color: #01579B;
}
.icons {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 24px;
  font-size: 22px;
  color: #0D47A1;
  margin-top: 10px;
}
.icons a {
  color: #0D47A1;
  text-decoration: none;
  transition: color 0.3s ease;
}
.icons a:hover {
  color: #FF5722;
}
@media (max-width: 600px) {
  .logo-section {
    flex-direction: column;
    align-items: center;
    gap: 10px;
    text-align: center;
  }
  .icons {
    justify-content: center;
    font-size: 20px;
  }
  .title-text h1 {
    font-size: 22px;
  }
  .title-text p {
    font-size: 14px;
  }
}

/* ===== Footer ===== */
footer {
  background: linear-gradient(135deg, #1a3d7c, #0d6d2f);
  color: #fff;
  padding: 20px 0 10px 0;
  font-family: "Noto Sans Devanagari", Arial, sans-serif;
}
.footer-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
  max-width: 1000px;
  margin: auto;
  padding: 0 10px;
}
.footer-section {
  flex: 1 1 250px;
  margin: 10px;
}
.footer-section h3,
.footer-section h4 {
  margin-bottom: 10px;
  border-bottom: 2px solid #fff;
  display: inline-block;
  padding-bottom: 3px;
}
.footer-section p {
  margin: 5px 0;
  font-size: 14px;
}
.footer-section ul {
  list-style: none;
  padding: 0;
}
.footer-section ul li {
  margin: 5px 0;
}
.footer-section ul li a {
  color: #fff;
  text-decoration: none;
  transition: color 0.3s ease;
}
.footer-section ul li a:hover {
  color: #ffd700;
}
.footer-bottom {
  text-align: center;
  font-size: 13px;
  margin-top: 15px;
  border-top: 1px solid rgba(255,255,255,0.3);
  padding-top: 10px;
}

/* ===== Body & Popup ===== */
body {
  font-family: "Noto Sans Devanagari", Arial, sans-serif;
  margin: 0;
  background: #f9f9f9;
}
.container { padding: 20px; max-width: 700px; margin:auto; }
.search-bar {
  width: 100%;
  padding: 10px;
  margin: 20px 0;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 16px;
}
.user-list { margin-top: 10px; }
.user-item {
  background: #fff;
  padding: 12px 15px;
  margin: 8px 0;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: 0.3s ease;
}
.user-item:hover { background: #e0f7fa; }
.popup {
  display: none;
  position: fixed;
  top:0; left:0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.2);
  overflow-y: auto;
  z-index: 1000;
}
.popup-content {
  background: #fff;
  margin: 50px auto;
  max-width: 600px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.popup-header {
  background: linear-gradient(135deg, #8fc1e3, #c1f0d1);
  text-align: center;
  padding: 20px;
  position: relative;
}
.popup-header img {
  width: 100px; height:100px;
  border-radius:50%;
  border:3px solid #fff;
  margin-bottom:10px;
}
.popup-header h2, .popup-header h3, .popup-header p {
  margin: 5px 0;
}
.close-btn {
  position: absolute;
  top:10px; right:10px;
  background:#fff;
  border:none;
  font-size:20px;
  padding:5px 10px;
  border-radius:50%;
  cursor:pointer;
  color:#333;
}
.section {
  background:#fdfdfd;
  margin:15px;
  padding:15px;
  border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);
}
.section h4 { margin-bottom:10px; border-bottom:1px solid #ddd; padding-bottom:5px; }
.section p { margin:5px 0; }
.highlight { font-weight:bold; color:#d32f2f; }
.paid-highlight { font-weight:bold; color:#388e3c; }
</style>
</head>
<body>

<!-- Header -->
<header class="webapp-header">
  <div class="logo-section">
    <div class="logo-title">
      <img src="logo.jpg" alt="Logo" class="logo">
      <div class="title-text">
        <h1>‡§ï‡§æ‡§Æ‡•á‡§ó‡§æ‡§µ ‡§ó‡•ç‡§∞‡§æ‡§Æ‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§</h1>
        <p>‡§Ü‡§™‡§≤‡•á ‡§ó‡§æ‡§µ, ‡§Ü‡§™‡§≤‡•Ä ‡§ú‡§¨‡§æ‡§¨‡§¶‡§æ‡§∞‡•Ä</p>
      </div>
    </div>
    <div class="icons">
      <a href="index.html" title="Home"><i class="fas fa-house"></i></a>
      <a href="notice.html" title="Notifications"><i class="fas fa-bell"></i></a>
      <a href="login.html" title="Login"><i class="fas fa-user-circle"></i></a>
    </div>
  </div>
</header>

<div class="container">
  <input type="text" id="searchBar" class="search-bar" placeholder="üîç ‡§®‡§æ‡§µ ‡§∂‡•ã‡§ß‡§æ / Search name">
  <div class="user-list" id="userList"></div>
</div>

<div class="popup" id="popup">
  <div class="popup-content">
    <div class="popup-header">
      <button class="close-btn" onclick="closePopup()">‚úï</button>
      <img id="popupImg" src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Profile">
      <h2 id="popupNameMr"></h2>
      <h3 id="popupNameEn"></h3>
      <p id="popupWard"></p>
    </div>
    <div class="section" id="demandSection">
      <h4>üîπ ‡§Æ‡§æ‡§ó‡§£‡•Ä (Demand)</h4>
      <p>‡§ò‡§∞‡§™‡•Ä ‡§ï‡§∞: <span id="dHarpi"></span></p>
      <p>‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§ï‡§∞: <span id="dArogya"></span></p>
      <p>‡§¶‡§¨‡§æ‡§¨‡•Ä ‡§ï‡§∞: <span id="dDababi"></span></p>
      <p>‡§™‡§æ‡§£‡•Ä‡§™‡§ø ‡§ï‡§∞: <span id="dPani"></span></p>
      <p>‡§™‡§°‡§∏‡§∞ ‡§ú‡§Æ‡•Ä‡§®: <span id="dPad"></span></p>
      <p>‡§¶‡§Ç‡§°: <span id="dFine"></span></p>
      <p class="highlight">‡§è‡§ï‡•Ç‡§£ ‡§Æ‡§æ‡§ó‡§£‡•Ä: <span id="dTotal"></span></p>
    </div>
    <div class="section" id="collectionSection">
      <h4>üîπ ‡§µ‡§∏‡•Å‡§≤ (Collection)</h4>
      <p>‡§¨‡•Å‡§ï: <span id="cBook"></span></p>
      <p>‡§™‡§æ‡§µ‡§§‡•Ä ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï: <span id="cReceipt"></span></p>
      <p>‡§™‡§æ‡§µ‡§§‡•Ä ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï: <span id="cDate"></span></p>
      <p>Paid ‡§ò‡§∞‡§™‡•Ä ‡§ï‡§∞: <span id="cHarpi"></span></p>
      <p>Paid ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§ï‡§∞: <span id="cArogya"></span></p>
      <p>Paid ‡§¶‡§¨‡§æ‡§¨‡•Ä ‡§ï‡§∞: <span id="cDababi"></span></p>
      <p>Paid ‡§™‡§æ‡§£‡•Ä‡§™‡§ø ‡§ï‡§∞: <span id="cPani"></span></p>
      <p>Paid Land Tax / ‡§≠‡§∞‡§≤‡•á‡§≤‡§æ ‡§™‡§°‡§∏‡§∞ ‡§ú‡§Æ‡•Ä‡§®: <span id="cPadLand"></span></p>
      <p>Paid Penalty / ‡§≠‡§∞‡§≤‡•á‡§≤‡§æ ‡§¶‡§Ç‡§°: <span id="cFinePaid"></span></p>
      <p>Discount / ‡§∏‡•Å‡§ü: <span id="cDiscount"></span></p>
      <p class="paid-highlight">Total Collection / ‡§è‡§ï‡•Ç‡§£ ‡§µ‡§∏‡•Å‡§≤: <span id="cTotalCollection"></span></p>
      <p>Balance / ‡§¨‡§æ‡§ï‡•Ä: <span id="cRemain"></span></p>
    </div>
  </div>
</div>

<!-- Footer -->
<footer>
  <div class="footer-container">
    <div class="footer-section">
      <h3>üåê ‡§ó‡•ç‡§∞‡§æ‡§Æ‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§ ‡§∏‡•á‡§§‡•Ç</h3>
      <p>‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§ó‡§æ‡§µ‡§æ‡§ö‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä, ‡§Ø‡•ã‡§ú‡§®‡§æ, ‡§Ü‡§£‡§ø ‡§§‡§æ‡§ú‡•ç‡§Ø‡§æ ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§è‡§ï‡§æ ‡§ï‡•ç‡§≤‡§ø‡§ï‡§Æ‡§ß‡•ç‡§Ø‡•á.</p>
    </div>
    <div class="footer-section">
      <h4>üìç ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</h4>
      <p>üìû</p>
      <p>‚úâÔ∏è kamegaon@gmail.com</p>
      <p>üè† ‡§ó‡§æ‡§µ, ‡§§‡§æ‡§≤‡•Å‡§ï‡§æ, ‡§ú‡§ø‡§≤‡•ç‡§π‡§æ</p>
    </div>
    <div class="footer-section">
      <h4>üîó ‡§¶‡•Å‡§µ‡•á</h4>
      <ul>
        <li><a href="index.html">üè† ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§™‡§æ‡§®</a></li>
        <li><a href="notice.html">üì¢ ‡§∏‡•Ç‡§ö‡§®‡§æ</a></li>
        <li><a href="panchayat-info.html">‡§ó‡•ç‡§∞‡§æ‡§Æ‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <p>¬© 2025 ‡§ó‡•ç‡§∞‡§æ‡§Æ‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§ KAMEGAON ‡§∏‡•á‡§§‡•Ç</p>
  </div>
</footer>

<script>
// Language switch
let lang = 'mr';
function switchLang() {
  lang = (lang==='mr') ? 'en' : 'mr';
}

// CSV Fetch & Search
let usersData = [];
const userList = document.getElementById("userList");
fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vTDCBhcg0ARlcpZqsc5KHZh6mWi3cgqS1KCtHoSVziWsCDoR0ZyxWcqkYMdWxPVCfgrj7kNSP574xVa/pub?output=csv")
.then(res=>res.text())
.then(csv=>{
  const rows = csv.split("\n").map(r=>r.split(","));
  const headers = rows[0];
  usersData = rows.slice(1).map(row=>{
    let obj={};
    row.forEach((cell,i)=>{ obj[headers[i].trim()]=cell.trim(); });
    obj.demand = {
      harpi: Number(obj['House Tax / ‡§ò‡§∞‡§™‡•Ä ‡§ï‡§∞']||0),
      arogya: Number(obj['Health Tax / ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§ï‡§∞']||0),
      dababi: Number(obj['Education/Other Tax / ‡§¶‡§¨‡§æ‡§¨‡•Ä ‡§ï‡§∞']||0),
      pani: Number(obj['Water Tax / ‡§™‡§æ‡§£‡•Ä‡§™‡§ø ‡§ï‡§∞']||0),
      pad: Number(obj['Land Tax / ‡§™‡§°‡§∏‡§∞ ‡§ú‡§Æ‡•Ä‡§®']||0),
      fine: Number(obj['Penalty / ‡§¶‡§Ç‡§°']||0)
    };
    obj.collection = {
      book: obj['Book No (‡§¨‡•Å‡§ï)']||"",
      receipt: obj['Receipt No. / ‡§™‡§æ‡§µ‡§§‡•Ä ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï']||"",
      date: obj['Receipt Date / ‡§™‡§æ‡§µ‡§§‡•Ä ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï']||"",
      harpi: Number(obj['Paid House Tax / ‡§≠‡§∞‡§≤‡•á‡§≤‡§æ ‡§ò‡§∞‡§™‡•Ä ‡§ï‡§∞']||0),
      arogya: Number(obj['Paid Health Tax / ‡§≠‡§∞‡§≤‡•á‡§≤‡§æ ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§ï‡§∞']||0),
      dababi: Number(obj['Paid Other Tax / ‡§≠‡§∞‡§≤‡•á‡§≤‡§æ ‡§¶‡§¨‡§æ‡§¨‡•Ä ‡§ï‡§∞']||0),
      pani: Number(obj['Paid Water Tax / ‡§≠‡§∞‡§≤‡•á‡§≤‡§æ ‡§™‡§æ‡§£‡•Ä‡§™‡§ø ‡§ï‡§∞']||0),
      padLand: Number(obj['Paid Land Tax / ‡§≠‡§∞‡§≤‡•á‡§≤‡§æ ‡§™‡§°‡§∏‡§∞ ‡§ú‡§Æ‡•Ä‡§®']||0),
      finePaid: Number(obj['Paid Penalty / ‡§≠‡§∞‡§≤‡•á‡§≤‡§æ ‡§¶‡§Ç‡§°']||0),
      sut: Number(obj['Discount / ‡§∏‡•Å‡§ü']||0)
    };
    return obj;
  });
  displayUsers(usersData);
});

document.getElementById('searchBar').addEventListener('input', function(){
  const query=this.value.toLowerCase();
  displayUsers(usersData.filter(u=>(lang==='mr'?u['Name (Marathi) / ‡§®‡§æ‡§µ (‡§Æ‡§∞‡§æ‡§†‡•Ä)']:u['Name (English) / ‡§®‡§æ‡§µ (‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä)']).toLowerCase().includes(query)));
});

function displayUsers(users){
  userList.innerHTML='';
  users.forEach(u=>{
    const div=document.createElement("div");
    div.className="user-item";
    div.innerText=lang==='mr'?u['Name (Marathi) / ‡§®‡§æ‡§µ (‡§Æ‡§∞‡§æ‡§†‡•Ä)']:u['Name (English) / ‡§®‡§æ‡§µ (‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä)'];
    div.onclick=()=>openPopup(u);
    userList.appendChild(div);
  });
}

function openPopup(u){
  document.getElementById("popupImg").src="https://cdn-icons-png.flaticon.com/512/149/149071.png";
  document.getElementById("popupNameMr").innerText=u['Name (Marathi) / ‡§®‡§æ‡§µ (‡§Æ‡§∞‡§æ‡§†‡•Ä)'];
  document.getElementById("popupNameEn").innerText=u['Name (English) / ‡§®‡§æ‡§µ (‡§á‡§Ç‡§ó‡•ç‡§∞‡§ú‡•Ä)'];
  document.getElementById("popupWard").innerText=`üè† ‡§µ‡§æ‡§∞‡•ç‡§° ‡§®‡§Ç. ${u['Ward No. / ‡§µ‡§æ‡§∞‡•ç‡§° ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï']}, ‡§ò‡§∞ ‡§®‡§Ç. ${u['House No. / ‡§ò‡§∞ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï']}`;
  
  let d=u.demand;
  document.getElementById("dHarpi").innerText=d.harpi;
  document.getElementById("dArogya").innerText=d.arogya;
  document.getElementById("dDababi").innerText=d.dababi;
  document.getElementById("dPani").innerText=d.pani;
  document.getElementById("dPad").innerText=d.pad;
  document.getElementById("dFine").innerText=d.fine;
  document.getElementById("dTotal").innerText=d.harpi+d.arogya+d.dababi+d.pani+d.pad+d.fine;

  let c=u.collection;
  document.getElementById("cBook").innerText=c.book;
  document.getElementById("cReceipt").innerText=c.receipt;
  document.getElementById("cDate").innerText=c.date;
  document.getElementById("cHarpi").innerText=c.harpi;
  document.getElementById("cArogya").innerText=c.arogya;
  document.getElementById("cDababi").innerText=c.dababi;
  document.getElementById("cPani").innerText=c.pani;
  document.getElementById("cPadLand").innerText=c.padLand;
  document.getElementById("cFinePaid").innerText=c.finePaid;
  document.getElementById("cDiscount").innerText=c.sut;
  document.getElementById("cTotalCollection").innerText=c.harpi+c.arogya+c.dababi+c.pani+c.padLand+c.finePaid-c.sut;
  document.getElementById("cRemain").innerText=(d.harpi+d.arogya+d.dababi+d.pani+d.pad+d.fine)-(c.harpi+c.arogya+c.dababi+c.pani+c.padLand+c.finePaid-c.sut);

  document.getElementById("popup").style.display="block";
}

function closePopup(){
  document.getElementById("popup").style.display="none";
}
</script>
</body>
</html>
